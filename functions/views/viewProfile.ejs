<% include nav.ejs %>

<head>
	<title>View Profile | Equity Sports</title>
</head>

<div class="container">
	<div class="row"></div>
	<div class="row">
		<div class="col l3"></div>
		<div class="col s12 l6">
			<div class="card">
				<form action="/onSignUp" method="POST">
					<div class="card-content">
						<h4 style="color: #faae29">Registration Form</h4>
						<br />
						<div class="input-field">
							<input value="" id="firstName" name="firstName" type="text" class="validate" readonly required />
							<label class="active" for="firstName">First Name</label>
						</div>
						<div class="input-field">
							<input value="" id="lastName" name="lastName" type="text" class="validate" readonly required />
							<label class="active" for="lastName">Last Name</label>
						</div>
						<div class="input-field">
							<input value="" id="emailId" name="emailId" type="email" class="validate" readonly
								required />
							<label class="active" for="emailId">Email</label>
						</div>
						<div class="input-field">
							<input value="" id="password" name="password" type="password" class="validate" required />
							<label class="active" for="password">Password</label>
						</div>
						<div class="input-field">
							<input value="" id="mobile" name="mobile" type="tel" min="10" max="10" class="validate"
							readonly required />
							<label class="active" for="mobile">Mobile Number</label>
						</div>
						<div class="input-field">
							<input value="" id="uid" name="uid" type="text" class="validate" required hidden />
							<label class="active" for="mobile"></label>
						</div>
						<div class="card-action">
							<button class="btn waves-effect waves-light" type="submit" disabled>
								Submit
								<i class="material-icons right">send</i>
							</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<%include foot.ejs %>
<script>
	firebase.auth().onAuthStateChanged(function (user) {
		if (user) {
			firebase
				.firestore()
				.collection('users')
				.doc(user.uid)
				.get()
				.then(doc => {
					if (doc.exists) {
						document.getElementById('firstName').value = doc.data().firstName;
						document.getElementById('lastName').value = doc.data().lastName;
						document.getElementById('emailId').value = doc.data().emailId;
						document.getElementById('mobile').value = doc.data().mobile;
					}
				})
				.catch(err => {
					console.log(err);
					window.location = '/onetime';
				});
		}
	});
</script>