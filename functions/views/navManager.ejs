<!DOCTYPE html>
<html>
	<head>
		<% include ga.ejs %> <%include meta.ejs %>
		<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons"
			rel="stylesheet"
		/>
		<link
			type="text/css"
			rel="stylesheet"
			href="css/materialize.min.css"
			media="screen,projection"
		/>
		<link typr="text/css" rel="stylesheet" href="css/home.css" />
		<title>Equity Sports</title>
		<meta property="og:title" content="Equity Sports" />
		<meta
			property="og:url"
			content="https://equity-sports.firebaseapp.com"
		/>
		<script src="/__/firebase/5.8.3/firebase-app.js"></script>
		<script src="/__/firebase/5.8.3/firebase-auth.js"></script>
		<script src="/__/firebase/5.8.3/firebase-firestore.js"></script>
		<script src="/__/firebase/init.js"></script>
		<script type="text/javascript">
			var timeoutWarning = 840000; // Display warning in 14 Mins.
			var timeoutNow = 900000; // Warning has been shown, give the user 1 minute to interact
			var warningTimer, timeoutTimer;
			function StartWarningTimer() {
				warningTimer = setTimeout('IdleWarning()', timeoutWarning);
			}
			function ResetTimeOutTimer() {
				clearTimeout(timeoutTimer);
				StartWarningTimer();
				$('#timeout').dialog('close');
			}
			function IdleWarning() {
				clearTimeout(warningTimer);
				timeoutTimer = setTimeout('signOut()', timeoutNow);
				$('#timeout').dialog({
					modal: true
				});
				// Add code in the #timeout element to call ResetTimeOutTimer() if
				// the "Stay Logged In" button is clicked
			}
			function signOut() {
				firebase.auth().signOut();
			}
			// function initApp() {
			// 	firebase.auth().onAuthStateChanged(function (user) {
			// 		if (user) {
			// 			StartWarningTimer();
			// 			var d = new Date();
			// 			if ((d.getTime() - Date.parse(user.metadata.lastSignInTime)) > 900000) {
			// 				alert("Please login again. Session expired.")
			// 				firebase.auth().signOut();
			// 			}
			// 			var displayName = user.displayName;
			// 			var email = user.email;
			// 			var uid = user.uid;
			// 			var a = document.getElementById('uiads');
			// 			a.href = "/notif?uid=" + uid;
			// 			document.getElementById("accountName").innerHTML = email;
			// 		} else {
			// 			window.location = "/login";
			// 		}
			// 	});
			//}
			// window.onload = initApp();
		</script>
	</head>

	<body onload="Materialize.toast('Loading...', 1000)">
		<header>
			<nav>
				<ul id="slide-out" class="side-nav">
					<li>
						<img class="responsive-img" src="images/logo.png" />
					</li>
					<li><a id="accountName" class="waves-effect"></a></li>
					<li>
						<div class="divider"></div>
					</li>
					<li>
						<a class="waves-effect" href="/" style="height: 120px">
							<h4
								style="color: #3eaca8; padding: 1px; text-align: center"
							>
								Equity Sports
							</h4>
						</a>
					</li>
					<li>
						<a class="waves-effect" href="/viewProfile"
							><i class="material-icons">face</i>View Profile</a
						>
					</li>
					<li>
						<a class="waves-effect" href="/addEvent"
							><i class="material-icons">people</i>Add Events</a
						>
					</li>
					<li>
						<div class="divider"></div>
					</li>
					<li>
						<a class="waves-effect" href="/Developers"
							><i class="material-icons">developer_mode</i
							>Developers</a
						>
					</li>
					<li>
						<a class="waves-effect" onclick="signOut()"
							><i class="material-icons">arrow_back</i>Logout</a
						>
					</li>
				</ul>
				<a
					href="#"
					data-activates="slide-out"
					class="button-collapse show-on-large"
					><i class="material-icons">menu</i></a
				>
			</nav>
		</header>